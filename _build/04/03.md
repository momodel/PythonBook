---
interact_link: content/D:\ZU_workplace\08_book\Python-book\Pythonbook1\content\04/03.ipynb
kernel_name: python3
has_widgets: false
title: '04-03 Numpy 数组及其索引'
prev_page:
  url: /04/02
  title: '04-02 Matplotlib基础'
next_page:
  url: /04/04
  title: '04-04 数组类型'
comment: "***PROGRAMMATICALLY GENERATED, DO NOT EDIT. SEE ORIGINAL FILES IN /content***"
---

# Numpy 数组及其索引

先导入numpy：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
from numpy import *
```
</div>

</div>

## 产生数组

从列表产生数组：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
lst = [0, 1, 2, 3]
a = array(lst)
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([0, 1, 2, 3])
```


</div>
</div>
</div>

或者直接将列表传入：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = array([1, 2, 3, 4])
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([1, 2, 3, 4])
```


</div>
</div>
</div>

## 数组属性

查看类型：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
type(a)
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
numpy.ndarray
```


</div>
</div>
</div>

查看数组中的数据类型：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
# 32比特的整数
a.dtype
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
dtype('int64')
```


</div>
</div>
</div>

查看每个元素所占的字节：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a.itemsize
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
8
```


</div>
</div>
</div>

查看形状，会返回一个元组，每个元素代表这一维的元素数目：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
# 1维数组，返回一个元组
a.shape
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
(4,)
```


</div>
</div>
</div>

或者使用：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
shape(a)
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
(4,)
```


</div>
</div>
</div>

`shape` 的使用历史要比 `a.shape` 久，而且还可以作用于别的类型：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
lst = [1,2,3,4]
shape(lst)
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
(4,)
```


</div>
</div>
</div>

查看元素数目：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a.size
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
4
```


</div>
</div>
</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
size(a)
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
4
```


</div>
</div>
</div>

查看所有元素所占的空间：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a.nbytes
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
32
```


</div>
</div>
</div>

但事实上，数组所占的存储空间要比这个数字大，因为要用一个header来保存shape，dtype这样的信息。

查看数组维数：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a.ndim
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
1
```


</div>
</div>
</div>

## 使用fill方法设定初始值

可以使用 `fill` 方法将数组设为指定值：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a.fill(-4.8)
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([-4, -4, -4, -4])
```


</div>
</div>
</div>

但是与列表不同，数组中要求所有元素的 `dtype` 是一样的，如果传入参数的类型与数组类型不一样，需要按照已有的类型进行转换。

## 索引与切片

和列表相似，数组也支持索引和切片操作。

索引第一个元素：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = array([0, 1, 2, 3])
a[0]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
0
```


</div>
</div>
</div>

修改第一个元素的值：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[0] = 10
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([10,  1,  2,  3])
```


</div>
</div>
</div>

切片，支持负索引：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = array([11,12,13,14,15])
a[1:3]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([12, 13])
```


</div>
</div>
</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[1:-2]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([12, 13])
```


</div>
</div>
</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[-4:3]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([12, 13])
```


</div>
</div>
</div>

省略参数：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[::2]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([11, 13, 15])
```


</div>
</div>
</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[-2:]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([14, 15])
```


</div>
</div>
</div>

假设我们记录一辆汽车表盘上每天显示的里程数：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
od = array([21000, 21180, 21240, 22100, 22400])
```
</div>

</div>

可以这样计算每天的旅程：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
dist = od[1:] - od[:-1]
dist
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([180,  60, 860, 300])
```


</div>
</div>
</div>

在本质上，**Python**会将array的各种计算转换为类似这样的**C**代码：

```c
int compute_sum(int *arr, int N) {
    int sum = 0;
    int i;
    for (i = 0; i < N; i++) {
        sum += arr[i];
    }
    return sum;
}
```

## 多维数组及其属性

`array` 还可以用来生成多维数组：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = array([[ 0, 1, 2, 3],
           [10,11,12,13]])
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[ 0,  1,  2,  3],
       [10, 11, 12, 13]])
```


</div>
</div>
</div>

事实上我们传入的是一个以列表为元素的列表，最终得到一个二维数组。

甚至可以扩展到3D或者4D的情景。

查看形状：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a.shape
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
(2, 4)
```


</div>
</div>
</div>

这里2代表行数，4代表列数。

查看总的元素个数：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
# 2 * 4 = 8
a.size
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
8
```


</div>
</div>
</div>

查看维数：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a.ndim
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
2
```


</div>
</div>
</div>

## 多维数组索引

对于二维数组，可以传入两个数字来索引：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[1, 3]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
13
```


</div>
</div>
</div>

其中，1是行索引，3是列索引，中间用逗号隔开，事实上，**Python**会将它们看成一个元组(1,3)，然后按照顺序进行对应。

可以利用索引给它赋值：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[1, 3] = -1
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[ 0,  1,  2,  3],
       [10, 11, 12, -1]])
```


</div>
</div>
</div>

事实上，我们还可以使用单个索引来索引一整行内容：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
# 返回第二行元组组成的array
a[1]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([10, 11, 12, -1])
```


</div>
</div>
</div>

**Python**会将这单个元组当成对第一维的索引，然后返回对应的内容。

## 多维数组切片

多维数组，也支持切片操作：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = array([[ 0, 1, 2, 3, 4, 5],
           [10,11,12,13,14,15],
           [20,21,22,23,24,25],
           [30,31,32,33,34,35],
           [40,41,42,43,44,45],
           [50,51,52,53,54,55]])
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[ 0,  1,  2,  3,  4,  5],
       [10, 11, 12, 13, 14, 15],
       [20, 21, 22, 23, 24, 25],
       [30, 31, 32, 33, 34, 35],
       [40, 41, 42, 43, 44, 45],
       [50, 51, 52, 53, 54, 55]])
```


</div>
</div>
</div>

想得到第一行的第 4 和第 5 两个元素：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[0, 3:5]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([3, 4])
```


</div>
</div>
</div>

得到最后两行的最后两列：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[4:, 4:]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[44, 45],
       [54, 55]])
```


</div>
</div>
</div>

得到第三列：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[:, 2]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([ 2, 12, 22, 32, 42, 52])
```


</div>
</div>
</div>

每一维都支持切片的规则，包括负索引，省略：

    [lower:upper:step]

例如，取出3，5行的奇数列：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[2::2, ::2]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[20, 22, 24],
       [40, 42, 44]])
```


</div>
</div>
</div>

## 切片是引用

切片在内存中使用的是引用机制。

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = array([0,1,2,3,4])
b = a[2:4]
print (b)
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">
{:.output_stream}
```
[2 3]
```
</div>
</div>
</div>

引用机制意味着，**Python**并没有为 `b` 分配新的空间来存储它的值，而是让 `b` 指向了 `a` 所分配的内存空间，因此，改变 `b` 会改变 `a` 的值：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
b[0] = 10
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([ 0,  1, 10,  3,  4])
```


</div>
</div>
</div>

而这种现象在列表中并不会出现：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = [1,2,3,4,5]
b = a[2:3]
b[0] = 13234
print (a)
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">
{:.output_stream}
```
[1, 2, 3, 4, 5]
```
</div>
</div>
</div>

这样做的好处在于，对于很大的数组，不用大量复制多余的值，节约了空间。

缺点在于，可能出现改变一个值改变另一个值的情况。

一个解决方法是使用copy()方法产生一个复制，这个复制会申请新的内存：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = array([0,1,2,3,4])
b = a[2:4].copy()
b[0] = 10
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([0, 1, 2, 3, 4])
```


</div>
</div>
</div>

## 花式索引

切片只能支持连续或者等间隔的切片操作，要想实现任意位置的操作，需要使用花式索引 `fancy slicing` 。

### 一维花式索引

与 range 函数类似，我们可以使用 arange 函数来产生等差数组。

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = arange(0, 80, 10)
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([ 0, 10, 20, 30, 40, 50, 60, 70])
```


</div>
</div>
</div>

花式索引需要指定索引位置：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
indices = [1, 2, -3]
y = a[indices]
print (y)
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">
{:.output_stream}
```
[10 20 50]
```
</div>
</div>
</div>

还可以使用布尔数组来花式索引：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
mask = array([0,1,1,0,0,1,0,0],
            dtype=bool)
```
</div>

</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[mask]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([10, 20, 50])
```


</div>
</div>
</div>

或者用布尔表达式生成 `mask`，选出了所有大于0.5的值：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
from numpy.random import rand
a = rand(10)
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([0.30855819, 0.05557439, 0.86525128, 0.00160451, 0.89064744,
       0.07488939, 0.07780041, 0.87250863, 0.80284702, 0.29153922])
```


</div>
</div>
</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
mask = a > 0.5
a[mask]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([0.86525128, 0.89064744, 0.87250863, 0.80284702])
```


</div>
</div>
</div>

mask 必须是布尔数组。

### 二维花式索引

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = array([[ 0, 1, 2, 3, 4, 5],
           [10,11,12,13,14,15],
           [20,21,22,23,24,25],
           [30,31,32,33,34,35],
           [40,41,42,43,44,45],
           [50,51,52,53,54,55]])
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[ 0,  1,  2,  3,  4,  5],
       [10, 11, 12, 13, 14, 15],
       [20, 21, 22, 23, 24, 25],
       [30, 31, 32, 33, 34, 35],
       [40, 41, 42, 43, 44, 45],
       [50, 51, 52, 53, 54, 55]])
```


</div>
</div>
</div>

对于二维花式索引，我们需要给定 `row` 和 `col` 的值：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[(0,1,2,3,4), (1,2,3,4,5)]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([ 1, 12, 23, 34, 45])
```


</div>
</div>
</div>

返回的是一条次对角线上的5个值。

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[3:, [0,2,5]]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[30, 32, 35],
       [40, 42, 45],
       [50, 52, 55]])
```


</div>
</div>
</div>

返回的是最后三行的第1，3，5列。

也可以使用mask进行索引：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
mask = array([1,0,1,0,0,1],
            dtype=bool)
a[mask, 2]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([ 2, 22, 52])
```


</div>
</div>
</div>

与切片不同，花式索引返回的是原对象的一个复制而不是引用。

### “不完全”索引

只给定行索引的时候，返回整行：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
y = a[:3]
y
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[ 0,  1,  2,  3,  4,  5],
       [10, 11, 12, 13, 14, 15],
       [20, 21, 22, 23, 24, 25]])
```


</div>
</div>
</div>

这时候也可以使用花式索引取出第2，3，5行：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
condition = array([0,1,1,0,1])
a[condition]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[ 0,  1,  2,  3,  4,  5],
       [10, 11, 12, 13, 14, 15],
       [10, 11, 12, 13, 14, 15],
       [ 0,  1,  2,  3,  4,  5],
       [10, 11, 12, 13, 14, 15]])
```


</div>
</div>
</div>

### 三维花式索引

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = arange(64)
a.shape = 4,4,4
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11],
        [12, 13, 14, 15]],

       [[16, 17, 18, 19],
        [20, 21, 22, 23],
        [24, 25, 26, 27],
        [28, 29, 30, 31]],

       [[32, 33, 34, 35],
        [36, 37, 38, 39],
        [40, 41, 42, 43],
        [44, 45, 46, 47]],

       [[48, 49, 50, 51],
        [52, 53, 54, 55],
        [56, 57, 58, 59],
        [60, 61, 62, 63]]])
```


</div>
</div>
</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
y = a[:,:,[2, -1]]
y
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[[ 2,  3],
        [ 6,  7],
        [10, 11],
        [14, 15]],

       [[18, 19],
        [22, 23],
        [26, 27],
        [30, 31]],

       [[34, 35],
        [38, 39],
        [42, 43],
        [46, 47]],

       [[50, 51],
        [54, 55],
        [58, 59],
        [62, 63]]])
```


</div>
</div>
</div>

## where语句

    where(array)

`where` 函数会返回所有非零元素的索引。

### 一维数组

先看一维的例子：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = array([0, 12, 5, 20])
```
</div>

</div>

判断数组中的元素是不是大于10：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a > 10
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([False,  True, False,  True])
```


</div>
</div>
</div>

数组中所有大于10的元素的索引位置：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
where(a > 10)
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
(array([1, 3]),)
```


</div>
</div>
</div>

注意到 `where` 的返回值是一个元组。

使用元组是由于 where 可以对多维数组使用，此时返回值就是多维的。

在使用的时候，我们可以这样：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
indices = where(a > 10)
indices = indices[0]
indices
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([1, 3])
```


</div>
</div>
</div>

或者：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
indices = where(a>10)[0]
indices
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([1, 3])
```


</div>
</div>
</div>

可以直接用 `where` 的返回值进行索引：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
loc = where(a > 10)
a[loc]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([12, 20])
```


</div>
</div>
</div>

### 多维数组

考虑二维数组：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = array([[0, 12, 5, 20],
           [1, 2, 11, 15]])
loc = where(a > 10)
```
</div>

</div>

返回结果是一个二维的元组，每一维代表这一维的索引值：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
loc
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
(array([0, 0, 1, 1]), array([1, 3, 2, 3]))
```


</div>
</div>
</div>

也可以直接用来索引a：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[loc]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([12, 20, 11, 15])
```


</div>
</div>
</div>

或者可以这样：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
rows, cols = where(a>10)
```
</div>

</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
rows
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([0, 0, 1, 1])
```


</div>
</div>
</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
cols
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([1, 3, 2, 3])
```


</div>
</div>
</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a[rows, cols]
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([12, 20, 11, 15])
```


</div>
</div>
</div>

再看另一个例子：

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a = arange(25)
a.shape = 5,5
a
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24]])
```


</div>
</div>
</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
a > 12
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
array([[False, False, False, False, False],
       [False, False, False, False, False],
       [False, False, False,  True,  True],
       [ True,  True,  True,  True,  True],
       [ True,  True,  True,  True,  True]])
```


</div>
</div>
</div>

<div markdown="1" class="cell code_cell">
<div class="input_area" markdown="1">
```python
where(a > 12)
```
</div>

<div class="output_wrapper" markdown="1">
<div class="output_subarea" markdown="1">


{:.output_data_text}
```
(array([2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4]),
 array([3, 4, 0, 1, 2, 3, 4, 0, 1, 2, 3, 4]))
```


</div>
</div>
</div>
